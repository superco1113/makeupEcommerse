(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a45506f"],{"66b7":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(s){var o=s.handleSubmit;return[e("div",{staticClass:"row"},[e("form",{staticClass:"col-md-6",on:{submit:function(s){return s.preventDefault(),o(t.onSubmit)}}},[e("h3",{staticClass:"h3text"},[t._v("帳單資訊")]),e("hr",{staticClass:"style-six"}),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{staticClass:"formTxt",attrs:{for:"name"}},[t._v("姓名")]),e("ValidationProvider",{attrs:{name:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),e("span",{staticClass:"text-danger formTxt"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group col-md-6"},[e("label",{staticClass:"formTxt",attrs:{for:"phone"}},[t._v("聯絡電話")]),e("ValidationProvider",{attrs:{name:"phone",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"phone",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),e("span",{staticClass:"text-danger formTxt"},[t._v(t._s(o[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{staticClass:"formTxt",attrs:{for:"email"}},[t._v("電子郵件")]),e("ValidationProvider",{attrs:{name:"email",rules:"email|required"},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"請輸入郵件"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),e("span",{staticClass:"text-danger formTxt"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group col-md-6"},[e("label",{staticClass:"formTxt",attrs:{for:"useraddress"}},[t._v("收件人地址")]),e("ValidationProvider",{attrs:{name:"address",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var o=s.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),e("span",{staticClass:"text-danger formTxt"},[t._v(t._s(o[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"formTxt",attrs:{for:"comment"}},[t._v("訂單備註")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),e("button",{staticClass:"btn btn-outline-primary submit w-100 mb-3",staticStyle:{"font-size":"10px"},attrs:{type:"submit"}},[t._v("下單購買")])]),e("div",{staticClass:"col-md-6"},[e("h3",{staticClass:"h3text"},[t._v("您的訂單")]),e("hr",{staticClass:"style-six"}),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-borderless"},[e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{staticClass:"orderlistTxt pl-2",attrs:{scope:"col"}},[t._v("商品")]),e("th",{staticClass:"orderlistTxt pl-2 text-right",attrs:{scope:"col"}},[t._v("小計")])])]),e("tbody",t._l(t.productsInCart.carts,(function(s,o){return e("tr",{key:o},[e("td",{staticClass:"orderlistTxt"},[t._v(t._s(s.product.title)+" * "+t._s(s.qty))]),e("td",{staticClass:"text-right ntDollar"},[t._v("NT$"+t._s(s.total))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"orderlistTxt",staticStyle:{"background-color":"#e9ecef"}},[t._v("小計")]),e("td",{staticClass:"text-right ntDollar"},[t._v("NT$"+t._s(t.productsInCart.total))])]),e("tr",[e("td",{staticClass:"orderlistTxt",staticStyle:{"background-color":"#e9ecef"}},[t._v("運送方式")]),e("td",{staticClass:"orderlistTxt text-right"},[t._v("宅配")])]),e("tr",[e("td",{staticClass:"orderlistTxt",staticStyle:{"background-color":"#e9ecef"}},[t._v(" 總計 "),t.productsInCart.total!=t.productsInCart.final_total?e("span",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),e("td",{staticClass:"text-right ntDollar"},[t._v("NT$"+t._s(t.productsInCart.final_total))])]),e("tr",[e("td",{staticClass:"text-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],attrs:{type:"text",name:"code",id:"coupon",placeholder:"折價券"},domProps:{value:t.couponCode},on:{input:function(s){s.target.composing||(t.couponCode=s.target.value)}}})]),e("td",[e("button",{staticClass:"btn btn-outline-primary w-100 gopaid",staticStyle:{"font-size":"5px"},on:{click:t.useCoupon}},[t._v(" 使用折價券 ")])])])])])])])])]}}])})],1)},a=[],r=(e("99af"),{data:function(){return{productsInCart:{},isLoading:!1,couponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},created:function(){console.log("CustomerForm created"),this.getProductCart()},methods:{getProductCart:function(){console.log("begin to getProductCart");var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/cart");console.log(t);var s=this;s.isLoading=!0,this.$http.get(t).then((function(t){console.log("response data:"),console.log(t),t.data.success?(console.log(t.data),s.productsInCart=Object.assign({},t.data.data)):(console.log("get product cart failed"),console.log(t.data.message)),s.isLoading=!1}))},createOrder:function(){console.log("Begin to create Order");var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/order");console.log(t);var s=this;this.$http.post(t,{data:this.form}).then((function(t){console.log("response data:"),console.log(t),t.data.success?(console.log(t.data),s.$bus.$emit("message:refreshCart"),s.$router.push("/customer_order/paidList")):(console.log("fail to created order"),console.log(t.data.message)),s.isLoading=!1}))},onSubmit:function(){console.log("the form is submitted"),console.log(this.form),this.createOrder()},useCoupon:function(){var t=this;console.log("Use coupon");var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/coupon");console.log(s);var e=this;e.isLoading=!0,console.log("coupon code "+this.couponCode),this.$http.post(s,{data:{code:this.couponCode}}).then((function(s){console.log("response data:"),console.log(s),s.data.success?(console.log("success to use coupon"),console.log(s.data.data.final_total),t.getProductCart()):e.$bus.$emit("message:push",s.data.message),e.isLoading=!1}))}}}),l=r,i=(e("f7b9"),e("2877")),n=Object(i["a"])(l,o,a,!1,null,"14d2d123",null);s["default"]=n.exports},f1a9:function(t,s,e){},f7b9:function(t,s,e){"use strict";var o=e("f1a9"),a=e.n(o);a.a}}]);
//# sourceMappingURL=chunk-0a45506f.9c4c490b.js.map