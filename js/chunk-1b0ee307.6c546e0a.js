(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b0ee307"],{"1e3a":function(t,s,o){},"3b11":function(t,s,o){"use strict";o.r(s);var a=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),0==t.productsCount?o("div",[o("router-link",{staticClass:"btn btn-outline-primary gopaid mb-2",staticStyle:{"font-size":"5px"},attrs:{to:"/customer_order"}},[o("i",{staticClass:"far fa-arrow-alt-circle-left fa-xs mr-1"}),t._v("回到商店街 ")])],1):t._e(),t.productsCount>0?o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table"},[t._m(0),o("tbody",t._l(t.productsInCart.carts,(function(s,a){return o("tr",{key:a},[o("td",{staticClass:"text-center px-0"},[o("a",{staticClass:"btn btn-outline-primary btn-outline-customize",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.deleteOneProductInCart(s.id)}}},[o("i",{staticClass:"fas fa-times"})])]),o("td",{staticClass:"p-0"},[o("img",{staticStyle:{"max-width":"50px",display:"block","margin-left":"auto","margin-right":"auto"},attrs:{src:s.product.imageUrl}})]),o("td",{staticClass:"text-left px-0 pt-4"},[t._v(" "+t._s(s.product.title)+" "),s.coupon?o("span",{staticClass:"ml-1 text-success"},[t._v("已套用優惠券")]):t._e()]),o("td",{staticClass:"text-left px-0 pt-4 ntDollar"},[t._v("NT$"+t._s(s.product.price))]),o("td",{staticClass:"text-left px-0 pt-4"},[t._v(t._s(s.qty))]),o("td",{staticClass:"text-left px-0 pt-4 ntDollar"},[t._v("NT$"+t._s(s.total))])])})),0),o("tfoot",[o("tr",[o("td"),o("td"),o("td"),o("td"),o("td",{staticClass:"text-right"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],attrs:{type:"text",name:"code",id:"coupon",placeholder:"折價券"},domProps:{value:t.couponCode},on:{input:function(s){s.target.composing||(t.couponCode=s.target.value)}}})]),o("td",[o("button",{staticClass:"btn btn-outline-primary w-100 gopaid",staticStyle:{"font-size":"5px"},on:{click:t.useCoupon}},[t._v(" 使用折價券 ")])])])])])]):t._e(),t.productsCount>0?o("div",{staticClass:"row justify-content-end"},[o("div",{staticClass:"col-6"},[o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table"},[t._m(1),o("tbody",[o("tr",[o("td",[t._v("小計")]),o("td",{staticClass:"ntDollar"},[t._v("NT$ "+t._s(t.productsInCart.total))])]),t._m(2),o("tr",[o("td",[t._v("總計")]),o("td",{staticClass:"ntDollar"},[t._v(" NT$ "+t._s(t.productsInCart.final_total)+" "),t.productsInCart.total!=t.productsInCart.final_total?o("span",{staticClass:"ml-1 text-success"},[t._v(" 優惠價 ")]):t._e()])])]),o("tfoot",[o("tr",[o("td",{attrs:{colspan:"2"}},[o("router-link",{staticClass:"btn btn-outline-primary w-100 gopaid",staticStyle:{"font-size":"5px"},attrs:{to:"/customer_order/formList"}},[t._v(" 前往結帳 ")])],1)])])])])])]):t._e()],1)},e=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("thead",{staticClass:"thead-light"},[o("tr",[o("th",{attrs:{scope:"col"}}),o("th",{attrs:{scope:"col"}}),o("th",{staticClass:"pl-0",attrs:{scope:"col"}},[t._v("商品")]),o("th",{staticClass:"pl-0",attrs:{scope:"col"}},[t._v("價格")]),o("th",{staticClass:"pl-0",attrs:{scope:"col"}},[t._v("數量")]),o("th",{staticClass:"pl-0",attrs:{scope:"col"}},[t._v("小計")])])])},function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("thead",{staticClass:"thead-light"},[o("tr",[o("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v("購物車總計")])])])},function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("tr",[o("td",[t._v("運送方式")]),o("td",[t._v("宅配")])])}],c=(o("99af"),{data:function(){return{productsInCart:{},productsCount:0,isLoading:!1,couponCode:""}},created:function(){console.log("ClientOrderList created"),this.getProductCart()},methods:{getProductCart:function(){console.log("begin to getProductCart");var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/cart");console.log(t);var s=this;s.isLoading=!0,this.$http.get(t).then((function(t){console.log("response data:"),console.log(t),t.data.success?(console.log(t.data),s.productsInCart=Object.assign({},t.data.data),s.productsCount=s.productsInCart.carts.length):(console.log("get product cart failed"),console.log(t.data.message)),s.isLoading=!1}))},deleteOneProductInCart:function(t){var s=this;console.log("begin to deleteOneProductInCart");var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/cart/").concat(t);console.log(o);var a=this;a.isLoading=!0,this.$http.delete(o).then((function(t){console.log("response data:"),console.log(t),t.data.success?(s.getProductCart(),a.$bus.$emit("message:refreshCart")):(console.log("delete product in cart failed"),console.log(t.data.message)),a.isLoading=!1}))},useCoupon:function(){var t=this;console.log("Use coupon");var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("superco1113","/coupon");console.log(s);var o=this;o.isLoading=!0,console.log("coupon code "+this.couponCode),this.$http.post(s,{data:{code:this.couponCode}}).then((function(s){console.log("response data:"),console.log(s),s.data.success?(console.log("success to use coupon"),console.log(s.data.data.final_total),t.getProductCart()):o.$bus.$emit("message:push",s.data.message),o.isLoading=!1}))}}}),n=c,l=(o("3f13"),o("2877")),r=Object(l["a"])(n,a,e,!1,null,"22a04dad",null);s["default"]=r.exports},"3f13":function(t,s,o){"use strict";var a=o("1e3a"),e=o.n(a);e.a}}]);
//# sourceMappingURL=chunk-1b0ee307.6c546e0a.js.map